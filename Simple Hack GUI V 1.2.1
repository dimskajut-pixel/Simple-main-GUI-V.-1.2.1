local player = game.Players.LocalPlayer
local StarterGui = game:GetService("StarterGui")
local Lighting = game:GetService("Lighting")

-- 1. LOADING SCREEN (TULISAN DI ATAS BAR)
local LoadGui = Instance.new("ScreenGui", game.CoreGui)
LoadGui.IgnoreGuiInset = true 

local LoadFrame = Instance.new("Frame", LoadGui)
LoadFrame.Size = UDim2.new(1, 0, 1, 0)
LoadFrame.BackgroundColor3 = Color3.new(1, 1, 1)
LoadFrame.ZIndex = 9999

local LoadText = Instance.new("TextLabel", LoadFrame)
LoadText.Size = UDim2.new(1, 0, 0, 50)
LoadText.Position = UDim2.new(0, 0, 0.5, -60) -- POSISI DI ATAS BAR
LoadText.Text = "Join Discord Guys ðŸ‘¾"
LoadText.TextColor3 = Color3.new(0, 0, 0)
LoadText.Font = Enum.Font.SourceSansBold
LoadText.TextSize = 25
LoadText.BackgroundTransparency = 1
LoadText.ZIndex = 10000

local BarBg = Instance.new("Frame", LoadFrame)
BarBg.Size = UDim2.new(0, 220, 0, 25)
BarBg.Position = UDim2.new(0.5, -110, 0.5, 0)
BarBg.BackgroundColor3 = Color3.fromRGB(220, 220, 220)
BarBg.ZIndex = 10000
Instance.new("UICorner", BarBg)

local BarFill = Instance.new("Frame", BarBg)
BarFill.Size = UDim2.new(0, 0, 1, 0)
BarFill.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
BarFill.ZIndex = 10001
Instance.new("UICorner", BarFill)

local LoadLabel = Instance.new("TextLabel", BarBg)
LoadLabel.Size = UDim2.new(1, 0, 1, 0)
LoadLabel.Text = "Load.."
LoadLabel.TextColor3 = Color3.new(0, 0, 0)
LoadLabel.Font = Enum.Font.SourceSansBold
LoadLabel.TextSize = 14
LoadLabel.BackgroundTransparency = 1
LoadLabel.ZIndex = 10002

BarFill:TweenSize(UDim2.new(1, 0, 1, 0), "Out", "Linear", 3)
task.wait(3.2)
LoadGui:Destroy()

-- 2. NOTIFIKASI
local function notify(title, text)
    StarterGui:SetCore("SendNotification", {Title = title, Text = text, Duration = 3})
end

-- 3. KEY SYSTEM (TEXTBOX MUNCUL LAGI)
local KeyGui = Instance.new("ScreenGui", game.CoreGui)
local KeyFrame = Instance.new("Frame", KeyGui)
KeyFrame.Size = UDim2.new(0, 260, 0, 280)
KeyFrame.Position = UDim2.new(0.5, -130, 0.3, 0)
KeyFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
KeyFrame.Active = true; KeyFrame.Draggable = true
Instance.new("UICorner", KeyFrame)

local KeyTitle = Instance.new("TextLabel", KeyFrame)
KeyTitle.Size = UDim2.new(1, 0, 0, 50)
KeyTitle.Text = "âœ¨ KEY SYSTEM âœ¨"
KeyTitle.TextColor3 = Color3.new(1,1,1)
KeyTitle.BackgroundTransparency = 1
KeyTitle.Font = Enum.Font.SourceSansBold
KeyTitle.TextSize = 20

local KeyInput = Instance.new("TextBox", KeyFrame)
KeyInput.Size = UDim2.new(0.9, 0, 0, 45)
KeyInput.Position = UDim2.new(0.05, 0, 0, 60)
KeyInput.PlaceholderText = "Insert Key Here ðŸ”‘" -- TULISAN SESUAI REQUEST
KeyInput.Text = ""
KeyInput.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
KeyInput.TextColor3 = Color3.new(1,1,1)
KeyInput.TextScaled = true
Instance.new("UICorner", KeyInput)

local KeyBtn = Instance.new("TextButton", KeyFrame)
KeyBtn.Size = UDim2.new(0.8, 0, 0, 40)
KeyBtn.Position = UDim2.new(0.1, 0, 0, 120)
KeyBtn.Text = "ACCESS"; KeyBtn.BackgroundColor3 = Color3.fromRGB(60, 60, 60); KeyBtn.TextColor3 = Color3.new(1,1,1)
KeyBtn.Font = Enum.Font.SourceSansBold
Instance.new("UICorner", KeyBtn)

local KeyDiscBtn = Instance.new("TextButton", KeyFrame)
KeyDiscBtn.Size = UDim2.new(0.8, 0, 0, 40)
KeyDiscBtn.Position = UDim2.new(0.1, 0, 0, 170)
KeyDiscBtn.Text = "JOIN DISCORD"; KeyDiscBtn.BackgroundColor3 = Color3.fromRGB(88, 101, 242); KeyDiscBtn.TextColor3 = Color3.new(1,1,1)
KeyDiscBtn.Font = Enum.Font.SourceSansBold
Instance.new("UICorner", KeyDiscBtn)

KeyDiscBtn.MouseButton1Click:Connect(function()
    setclipboard("https://discord.gg/QuTCBeABH")
    notify("Discord", "Link Copied!")
end)

-- 4. MAIN MENU
local function OpenMain()
    KeyGui:Destroy()
    local MainGui = Instance.new("ScreenGui", game.CoreGui)
    
    local ShowBtn = Instance.new("TextButton", MainGui)
    ShowBtn.Size = UDim2.new(0, 70, 0, 35); ShowBtn.Position = UDim2.new(0, 10, 0.5, 0)
    ShowBtn.Text = "Show âœ¨"; ShowBtn.Visible = false; ShowBtn.Draggable = true
    ShowBtn.BackgroundColor3 = Color3.fromRGB(45, 45, 45); ShowBtn.TextColor3 = Color3.new(1,1,1)
    Instance.new("UICorner", ShowBtn)

    local MainFrame = Instance.new("Frame", MainGui)
    MainFrame.Size = UDim2.new(0, 200, 0, 520) 
    MainFrame.Position = UDim2.new(0.5, -100, 0.2, 0)
    MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
    MainFrame.Active = true; MainFrame.Draggable = true 
    Instance.new("UICorner", MainFrame)

    local list = Instance.new("UIListLayout", MainFrame)
    list.Padding = UDim.new(0, 8); list.HorizontalAlignment = "Center"

    local function createBtn(txt, color, func)
        local b = Instance.new("TextButton", MainFrame)
        b.Size = UDim2.new(0.9, 0, 0, 35)
        b.Text = txt; b.BackgroundColor3 = color; b.TextColor3 = Color3.new(1, 1, 1)
        b.TextScaled = true; b.Font = Enum.Font.SourceSansBold
        Instance.new("UICorner", b); b.MouseButton1Click:Connect(func)
    end

    createBtn("HIDE GUI âœ¨", Color3.fromRGB(120, 0, 180), function()
        MainFrame.Visible = false; ShowBtn.Visible = true
    end)

    -- ESP PLAYER
    createBtn("ESP PLAYER ðŸ‘¤", Color3.fromRGB(200, 0, 0), function()
        _G.ESP = not _G.ESP
        notify("ESP", _G.ESP and "Enabled" or "Disabled")
        while _G.ESP do
            task.wait(1)
            for _, v in pairs(game.Players:GetPlayers()) do
                if v ~= player and v.Character then
                    if not v.Character:FindFirstChild("Highlight") then
                        Instance.new("Highlight", v.Character).FillColor = Color3.fromRGB(255, 0, 0)
                    end
                end
            end
        end
    end)

    -- BRIGHTNESS CUSTOM
    local BrightInput = Instance.new("TextBox", MainFrame)
    BrightInput.Size = UDim2.new(0.9, 0, 0, 35)
    BrightInput.PlaceholderText = "Input Brightness (1-50)"
    BrightInput.BackgroundColor3 = Color3.fromRGB(45, 45, 45); BrightInput.TextColor3 = Color3.new(1,1,1)
    Instance.new("UICorner", BrightInput)

    createBtn("SET BRIGHTNESS âœ…", Color3.fromRGB(180, 150, 0), function()
        local val = tonumber(BrightInput.Text)
        if val then Lighting.Brightness = val; Lighting.GlobalShadows = false end
    end)

    -- SPEED CUSTOM
    local SpeedInput = Instance.new("TextBox", MainFrame)
    SpeedInput.Size = UDim2.new(0.9, 0, 0, 35)
    SpeedInput.PlaceholderText = "Input Speed (16)"
    SpeedInput.BackgroundColor3 = Color3.fromRGB(45, 45, 45); SpeedInput.TextColor3 = Color3.new(1,1,1)
    Instance.new("UICorner", SpeedInput)

    createBtn("SET SPEED âœ…", Color3.fromRGB(0, 120, 200), function()
        local val = tonumber(SpeedInput.Text)
        if val then player.Character.Humanoid.WalkSpeed = val end
    end)

    createBtn("Invisible ðŸ‘»", Color3.fromRGB(50, 150, 50), function()
        _G.Invis = not _G.Invis
        local char = player.Character
        for _, v in pairs(char:GetDescendants()) do
            if v:IsA("BasePart") or v:IsA("Decal") then v.Transparency = _G.Invis and 1 or 0 end
        end
    end)

    createBtn("JOIN DISCORD", Color3.fromRGB(88, 101, 242), function()
        setclipboard("https://discord.gg/QuTCBeABH"); notify("Link", "Copied!")
    end)

    ShowBtn.MouseButton1Click:Connect(function()
        MainFrame.Visible = true; ShowBtn.Visible = false
    end)
end

KeyBtn.MouseButton1Click:Connect(function()
    if KeyInput.Text == "fly" then OpenMain() else notify("Error", "Wrong Key!") end
end)
